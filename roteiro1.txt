üü¢ PASSO 1 ‚Äî Criar o reposit√≥rio no GitHub
Entre em github.com
Clique em New (ou New repository)
Preencha:
Repository name:
api-saude-publica
Description (opcional):
API para projeto de sa√∫de p√∫blica
Marque: Public
‚ùå N√ÉO marque README agora
Clique em Create repository
üëâ Voc√™ ver√° uma p√°gina vazia do reposit√≥rio.

################################################

üü¢ PASSO 2 ‚Äî Criar o arquivo main.py
No reposit√≥rio, clique em Add file ‚Üí Create new file
Em File name, digite:
main.py
Cole este c√≥digo:
from fastapi import FastAPI
app = FastAPI(title="API Sa√∫de P√∫blica")
@app.get("/")
def home():
    return {"mensagem": "Sistema de regula√ß√£o online"}

Role para baixo
Em Commit message, escreva:
adiciona main.py com FastAPI

Clique em Commit new file

####################################################

üü¢ PASSO 3 ‚Äî Criar o arquivo requirements.txt
Clique novamente em Add file ‚Üí Create new file
Nome do arquivo:
requirements.txt

Conte√∫do:
fastapi
uvicorn

Commit message:
adiciona requirements
Commit new file

#######################################################

üü¢ PASSO 4 ‚Äî Criar o arquivo render.yaml
Add file ‚Üí Create new file

Nome:

render.yaml

Conte√∫do:

services:
  - type: web
    name: api-saude-publica
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port 10000


Commit message:

adiciona configuracao do render


Commit new file

############################################################

‚úÖ CHECKPOINT ‚Äî Est√° tudo certo se voc√™ v√™ isso:

No reposit√≥rio:

api-saude-publica
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ render.yaml


Se estiver assim, voc√™ fez tudo certo.

##########################################################

üü¢ PASSO 5 ‚Äî Conectar o GitHub ao Render

Agora vamos colocar online.
Acesse https://render.com
Clique em Sign up / Log in
Entre com GitHub
Autorize o Render (uma vez s√≥)

#########################################################

üü¢ PASSO 6 ‚Äî Criar o servi√ßo no Render

No Render, clique em New +

Escolha Web Service
Selecione o reposit√≥rio:

api-saude-publica


Configure:
Name: api-saude-publica
Runtime: Python
Build Command:

pip install -r requirements.txt

Start Command:
uvicorn main:app --host 0.0.0.0 --port 10000
Clique em Create Web Service

##########################################################

https://api-saude-publica.onrender.com/docs

##########################################################

PASSO 2 ‚Äî Guardrail de palavras proibidas (conte√∫do)
üëâ Vamos impedir:
viol√™ncia extrema
crimes
pedidos fora da sa√∫de

PARA ISSO NO MAIN.PY

1. IMPORTS
2. app = FastAPI()
3. CONFIGURA√á√ïES / GUARDRAILS
4. MODELOS (Pydantic)
5. BASE DE DADOS (lista, dict, etc)
6. ENDPOINTS (@app.get, @app.post)

from fastapi import FastAPI, HTTPException
from pydantic import BaseModel, validator

app = FastAPI(title="API Sa√∫de P√∫blica")

#AGORA GUADRILS
PALAVRAS_PROIBIDAS = [
    "tiro", "arma", "bomba", "matar", "veneno",
    "explosivo", "suic√≠dio", "assassinato"
]

def verificar_conteudo(texto: str):
    for palavra in PALAVRAS_PROIBIDAS:
        if palavra in texto.lower():
            raise HTTPException(
                status_code=400,
                detail="Conte√∫do inv√°lido ou fora do escopo m√©dico"
            )
#AGORA GUADRILS

#MODELO PYDANTCS COM QUADRILS
class Doenca(BaseModel):
    nome: str
    descricao: str
    sintomas: list[str]
    tratamento: str

    @validator("nome", "descricao", "tratamento")
    def validar_texto(cls, v):
        verificar_conteudo(v)
        return v
#MODELO PYDANTCS COM QUADRILS

#BASE DE DADOS SIMPLES
doencas = [
    {
        "id": 1,
        "nome": "Diabetes Mellitus",
        "descricao": "Doen√ßa cr√¥nica caracterizada por n√≠veis elevados de glicose no sangue.",
        "sintomas": ["sede excessiva", "urinar frequentemente", "fadiga"],
        "tratamento": "Dieta, atividade f√≠sica e insulina."
    }
]

#ENDPOINTS
@app.get("/")
def home():
    return {
        "mensagem": "Sistema de regula√ß√£o e consulta m√©dica"
    }


@app.get("/doencas")
def listar_doencas():
    return doencas


@app.get("/doencas/{nome_doenca}")
def buscar_doenca(nome_doenca: str):
    verificar_conteudo(nome_doenca)

    for d in doencas:
        if nome_doenca.lower() in d["nome"].lower():
            return d

    raise HTTPException(
        status_code=404,
        detail="Doen√ßa n√£o encontrada"
    )


@app.post("/doencas")
def cadastrar_doenca(doenca: Doenca):
    novo_id = max(d["id"] for d in doencas) + 1 if doencas else 1
    nova_doenca = doenca.dict()
    nova_doenca["id"] = novo_id
    doencas.append(nova_doenca)
    return {
        "mensagem": "Doen√ßa cadastrada com sucesso",
        "doenca": nova_doenca
    }


#######
https://api-saude-publica-com-guardrails.onrender.com/docs



